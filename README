
# Pionianalyysi (E/p ROOT/RDataFrame)

Tässä projektissa tuotetaan ja piirretään histogrammeja CMS\:n PFNano-muotoisista simuloiduista tapahtumista.

## Kuinka ajaa koodi LXPlussassa

### 1. Kirjaudu LXPlussaan ja siirry projektihakemistoon:

```
ssh lxplus.cern.ch
cd /eos/user/m/mmarjama/my_pion_analysis
```

### 2. Lataa tarvittavat ohjelmistot (ROOT, VOMS, jne.):

```
source /cvmfs/sft.cern.ch/lcg/views/LCG_107a/x86_64-el9-gcc14-opt/setup.sh
```

### 3. Ota käyttöön toimiva Java-versio VOMSia varten:

```
export JAVA_HOME=/cvmfs/sft.cern.ch/lcg/releases/java/11.0.26p4-f0080/x86_64-el9-gcc13-opt
export PATH=$JAVA_HOME/bin:$PATH
```

### 4. Luo käyttöoikeustodistus:

```
voms-proxy-init --voms cms
```

### 5. Aja histogrammien tuotto tiedostolla:

```
root -l 'scripts/run_histograms.cc'
```

### 6. Piirrä histogrammit kuviksi:

```
root -l 'scripts/plot_histograms.cc'
```

### 7. Tulokset:

* Histogrammit tallennetaan tiedostoon: `histograms/pion_histos.root`
* Kuvana: `plots/charged_pions.png`

## Yhteenveto

* `run_histograms.cc` käyttää ROOT RDataFramea, valitsee ladatut pionit ja kirjoittaa histogrammit ROOT-tiedostoon.
* `plot_histograms.cc` lukee ROOT-tiedoston ja piirtää PNG-kuvan histogrammeista.

## Kuinka saada TBrowser auki -->

Omalla koneella
```
scp mmarjama@lxplus.cern.ch:/eos/user/m/mmarjama/my_pion_analysis/histograms/pion_histos.root .
pion_histos.root
```
root
```
TBrowser b;
```

## Uusien tiedostojen lataamiset -->

bash
```
dasgoclient -query="file dataset=/ZeroBias/nbinnorj-Run2024C_PromptRecoNano_v1_CDEReprocessing_AODToPFNANO_v0p1-00000000000000000000000000000000/USER instance=prod/phys03" > scripts/input_files_ZeroBias_Run2024C.txt

dasgoclient -query="file dataset=/ZeroBias/nbinnorj-Run2024D_PromptRecoNano_v1_CDEReprocessing_AODToPFNANO_v0p1-00000000000000000000000000000000/USER instance=prod/phys03" > scripts/input_files_ZeroBias_Run2024D.txt

dasgoclient -query="file dataset=/ZeroBias/nbinnorj-Run2024E_PromptRecoNano_v1_CDEReprocessing_AODToPFNANO_v0p1-00000000000000000000000000000000/USER instance=prod/phys03" > scripts/input_files_ZeroBias_Run2024E.txt

dasgoclient -query="file dataset=/ZeroBias/nbinnorj-Run2024F_PromptRecoNano_v1_Prompt_AODToPFNANO_v0p1-00000000000000000000000000000000/USER instance=prod/phys03" > scripts/input_files_ZeroBias_Run2024F.txt

dasgoclient -query="file dataset=/ZeroBias/nbinnorj-Run2024G_PromptRecoNano_v1_Prompt_AODToPFNANO_v0p1-00000000000000000000000000000000/USER instance=prod/phys03" > scripts/input_files_ZeroBias_Run2024G.txt

dasgoclient -query="file dataset=/ZeroBias/nbinnorj-Run2024H_PromptRecoNano_v1_Prompt_AODToPFNANO_v0p1-00000000000000000000000000000000/USER instance=prod/phys03" > scripts/input_files_ZeroBias_Run2024H.txt

dasgoclient -query="file dataset=/ZeroBias/nbinnorj-Run2024I_PromptRecoNano_v1_Prompt_AODToPFNANO_v0p1-00000000000000000000000000000000/USER instance=prod/phys03" > scripts/input_files_ZeroBias_Run2024I_v1.txt

dasgoclient -query="file dataset=/ZeroBias/nbinnorj-Run2024I_PromptRecoNano_v2_Prompt_AODToPFNANO_v0p1-00000000000000000000000000000000/USER instance=prod/phys03" > scripts/input_files_ZeroBias_Run2024I_v2.txt
```

## rootien muodostamiset -->
bash
```
root -l -q 'scripts/run_histograms.cc("scripts/input_files_ZeroBias_Run2024#.txt", "Run2024#")'
```
- vaihda # aina tiedoston kirjaimeen tai I:n tapauksessa
    2024I_v1 ja 2024I_v2

## merging
bash
```
hadd ParkingDoubleMuon_Run2024F.root histograms/pion_histos_iso_Run2024F_LowMass*.root
```
hadd histograms/ParkingDoubleMuon_Run2024F.root histograms/pion_histos_iso_Run2024F_LowMass*.root





hadd histograms/ZeroBias2024.root ZeroBias2024C.root ZeroBias2024D.root ZeroBias2024E.root ZeroBias2024F.root ZeroBias2024G.root ZeroBias2024H.root ZeroBias2024I_v1.root ZeroBias2024I_v2.root




filelists/SN/SN_ab SN_ab
filelists/SN/SN_ac SN_ac
filelists/SN/SN_ad SN_ad
filelists/SN/SN_ae SN_ae
filelists/SN/SN_af SN_af
filelists/SN/SN_ag SN_ag
filelists/SN/SN_ah SN_ah
filelists/SN/SN_ai SN_ai
filelists/SN/SN_aj SN_aj
filelists/SN/SN_ak SN_ak
filelists/SN/SN_al SN_al
filelists/SN/SN_am SN_am
filelists/SN/SN_an SN_an
filelists/SN/SN_ao SN_ao
filelists/SN/SN_ap SN_ap
filelists/SN/SN_aq SN_aq
filelists/SN/SN_ar SN_ar
filelists/SN/SN_as SN_as
filelists/SN/SN_at SN_at
filelists/SN/SN_au SN_au
filelists/SN/SN_av SN_av
filelists/SN/SN_aw SN_aw
filelists/SN/SN_ax SN_ax
filelists/SN/SN_ay SN_ay
filelists/SN/SN_az SN_az




/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_264.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_657.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_33.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_61.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_724.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1123.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_904.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_813.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_595.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_205.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_30.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_539.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_771.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1249.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1281.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_208.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_288.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_770.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_140.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1272.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_359.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1094.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_960.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_353.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1147.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1170.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_261.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_666.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_480.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_652.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_323.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_380.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_5.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1226.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_45.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_782.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_352.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_169.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_150.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_13.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1079.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_481.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_367.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_653.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_992.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_220.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_632.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_350.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0000/AODSIMToPFNano_796.root
/store/user/nbinnorj/AODToPFNANO_v15p0_2025/CRABOUTPUT/SingleNeutrino_E-10_gun/Run3Winter25NanoAODv15_AODToPFNANO_v15p0_2025_PFCandAll/250520_220150/0001/AODSIMToPFNano_1022.root